import{j as n}from"./jsx-runtime-D_zvdyIk.js";import{r}from"./iframe-C5ToFRAX.js";import{L as W,B as O}from"./button-0OwgFvfr.js";import{F as N}from"./featherIcon-B3IzmdwS.js";import{H as X,k as Y,U as Z,a as ee}from"./combobox-Dtl63kAB.js";import{P as ne}from"./popover-CbeU_aO8.js";const ae=({value:u,options:c,multiple:s=!1,label:A,placeholder:H,loading:R=!1,hideSearch:C=!1,showFooter:U=!1,prefix:V,suffix:T,itemPrefix:v,itemSuffix:I,maxOptions:z=50,compareFn:g=(d,p)=>d?.value===p?.value,placement:B="bottom-start",bodyClasses:Q,onChange:k})=>{const[d,p]=r.useState(""),[x,S]=r.useState(!1),h=r.useRef(null),o=r.useCallback(e=>typeof e=="object"&&e!==null&&"value"in e,[]),L=r.useCallback(e=>typeof e=="object"&&e!==null&&"items"in e&&"group"in e,[]),M=r.useCallback(e=>e?e.map(a=>o(a)?a:{label:String(a),value:a}):[],[o]),$=r.useCallback(e=>{if(!d)return e;const a=d.trim().toLowerCase();return e.filter(t=>t?.label?.toLowerCase().includes(a)||String(t.value).toLowerCase().includes(a))},[d]),f=r.useCallback(e=>{if(!e)return[];let a;return e.length>0&&L(e[0])?a=e:a=[{group:"",items:e,hideLabel:!1}],a},[L]),G=r.useMemo(()=>c?.length?f(c).map((a,t)=>({key:t,group:a.group,hideLabel:a.hideLabel,items:$(M(a.items||[]))})).filter(a=>a.items.length>0):[],[c,f,$,M]),m=r.useMemo(()=>f(c).flatMap(e=>e.items),[c,f]),w=r.useCallback(e=>{if(!e)return;const a=o(e)?e.value:e;return m.find(t=>t.value===a)},[m,o]),q=r.useCallback(e=>o(e)?e:{label:String(e),value:e},[o]),y=r.useCallback(e=>o(e)?e.label||String(e.value):String(e),[o]),l=r.useMemo(()=>u==null?s?[]:null:s?(Array.isArray(u)?u:[]).map(a=>w(a)||q(a)):w(u)||q(u),[u,s,w,q]),b=r.useCallback(e=>{if(!e)return;p(""),s||S(!1);const a=s?e.map(t=>t.value):e?.value??null;a&&k&&k(a)},[s,k]),F=r.useMemo(()=>l?s?l.map(e=>y(e)).join(", "):y(l):"",[l,s,y]),_=r.useCallback(e=>l?s?l.some(a=>g(a,e)):g(l,e):!1,[l,s,g]),P=r.useMemo(()=>s?m.length>0&&m.length===l?.length:!1,[s,m,l]),D=r.useCallback(()=>{b(m)},[m,b]),j=r.useCallback(e=>{e.stopPropagation(),b(s?[]:null)},[s,b]);r.useEffect(()=>{x&&h.current&&requestAnimationFrame(()=>{h.current?.focus()})},[x]);const E=r.useMemo(()=>`combobox-input-${Math.random().toString(36).substring(2,9)}`,[]);return n.jsx(X,{value:l,onChange:b,multiple:s,by:g,"data-testid":"autocomplete-component",children:({open:e})=>n.jsx(ne,{show:x,onUpdateShow:S,placement:B,popoverClass:Q,target:({togglePopover:a})=>n.jsxs("div",{className:"w-full space-y-1.5",children:[A&&n.jsx("label",{htmlFor:E,className:"block text-xs text-ink-gray-5",children:A}),n.jsxs("button",{type:"button",className:`flex h-7 w-full items-center justify-between gap-2 rounded bg-surface-gray-2 px-2 py-1 transition-colors hover:bg-surface-gray-3 border border-transparent focus:border-outline-gray-4 focus:ring-2 focus:ring-outline-gray-3 focus:outline-none ${e?"bg-surface-gray-3":""}`,onClick:a,role:"button","aria-label":"Toggle options",children:[n.jsx(N,{name:"chevron-down",className:"h-4 w-4 text-ink-gray-5","aria-hidden":"true"}),n.jsxs("div",{className:"flex items-center overflow-hidden",children:[V&&V(l),n.jsx("span",{className:`truncate text-base leading-5 ${F?"text-ink-gray-8":"text-ink-gray-4"}`,children:F||H||""}),T&&T(l)]})]})]}),body:({isOpen:a})=>a&&n.jsxs("div",{className:"relative mt-1 rounded-lg bg-surface-modal text-base shadow-2xl",children:[!C&&n.jsx("div",{className:"sticky top-0 z-[100] flex items-stretch space-x-1.5 bg-surface-modal py-1.5 rounded-lg",children:n.jsxs("div",{className:"relative w-full rounded flex mx-2 border border-surface-gray-2 bg-surface-gray-2 text-base text-ink-gray-8 placeholder-ink-gray-4 transition-colors hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:bg-surface-white focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 focus:bg-surface-gray-3 hover:bg-surface-gray-4 text-ink-gray-8 cursor-pointer",children:[n.jsx(Y,{id:E,ref:h,className:" h-7 w-full py-1.5 pl-2 pr-2 outline-none",type:"text","data-testid":"autocomplete",displayValue:()=>d,onChange:t=>p(t.target.value),autoComplete:"off",placeholder:"Search"}),n.jsx("div",{className:"inline-flex h-7 w-7 items-center justify-center",children:R?n.jsx(W,{"data-testid":"loading-indicator",className:"h-4 w-4 text-ink-gray-5"}):n.jsx("button",{type:"button","aria-label":"Clear",onClick:j,children:n.jsx(N,{name:"x",className:"w-4 h-4 text-ink-gray-8"})})})]})}),n.jsx(Z,{static:!0,className:`max-h-[15rem] overflow-y-auto px-1.5 pb-1.5 ${C?"pt-1.5":""}`,children:G.length===0?n.jsx("li",{className:"rounded-md px-2.5 py-1.5 text-base text-ink-gray-5",children:"No results found"}):G.map(t=>n.jsxs("div",{className:t.items.length===0?"hidden":"",children:[t.group&&!t.hideLabel&&n.jsx("div",{className:"sticky top-10 truncate bg-surface-modal px-2.5 py-1.5 text-sm font-medium text-ink-gray-5",children:t.group}),t.items.slice(0,z).map((i,J)=>n.jsx(ee,{value:i,disabled:i.disabled,className:({focus:K})=>`flex cursor-pointer items-center justify-between rounded px-2.5 py-1.5 text-base ${K?"bg-surface-gray-3":""} ${i.disabled?"opacity-50":""}`,children:n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex flex-1 gap-2 overflow-hidden items-center",children:[(v||s)&&n.jsx("div",{className:"flex flex-shrink-0",children:v?v(i):_(i)?n.jsx(N,{name:"check",className:"h-4 w-4 text-ink-gray-7"}):n.jsx("div",{className:"h-4 w-4"})}),n.jsx("span",{className:"flex-1 truncate text-ink-gray-7",children:y(i)})]}),I&&n.jsxs("div",{className:"ml-2 flex-shrink-0",children:[I(i),i?.description&&n.jsx("div",{className:"text-sm text-ink-gray-5",children:i.description})]})]})},J))]},t.group))}),U&&s&&n.jsx("div",{className:"border-t p-1",children:s?n.jsxs("div",{className:"flex items-center justify-end",children:[!P&&n.jsx(O,{label:"Select All",onClick:D}),P&&n.jsx(O,{label:"Clear All",onClick:j})]}):n.jsx("div",{className:"flex items-center justify-end",children:n.jsx(O,{label:"Clear",onClick:j})})})]})})})};ae.__docgenInfo={description:"",methods:[],displayName:"Autocomplete",props:{value:{required:!0,tsType:{name:"union",raw:"AutocompleteOption | AutocompleteOption[] | null | undefined",elements:[{name:"union",raw:"OptionValue | Option",elements:[{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1},{name:"signature",type:"object",raw:`{
  label?: string;
  value?: OptionValue;
  description?: string;
  disabled?: boolean;
  image?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"image",value:{name:"string",required:!1}}]}}]},{name:"Array",elements:[{name:"union",raw:"OptionValue | Option",elements:[{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1},{name:"signature",type:"object",raw:`{
  label?: string;
  value?: OptionValue;
  description?: string;
  disabled?: boolean;
  image?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"image",value:{name:"string",required:!1}}]}}]}],raw:"AutocompleteOption[]"},{name:"null"},{name:"undefined"}]},description:""},options:{required:!0,tsType:{name:"union",raw:"AutocompleteOption[] | AutocompleteOptionGroup[]",elements:[{name:"Array",elements:[{name:"union",raw:"OptionValue | Option",elements:[{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1},{name:"signature",type:"object",raw:`{
  label?: string;
  value?: OptionValue;
  description?: string;
  disabled?: boolean;
  image?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"image",value:{name:"string",required:!1}}]}}]}],raw:"AutocompleteOption[]"},{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  group: string;
  items: AutocompleteOption[];
  hideLabel?: boolean;
}`,signature:{properties:[{key:"group",value:{name:"string",required:!0}},{key:"items",value:{name:"Array",elements:[{name:"union",raw:"OptionValue | Option",elements:[{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1},{name:"signature",type:"object",raw:`{
  label?: string;
  value?: OptionValue;
  description?: string;
  disabled?: boolean;
  image?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"image",value:{name:"string",required:!1}}]}}]}],raw:"AutocompleteOption[]",required:!0}},{key:"hideLabel",value:{name:"boolean",required:!1}}]}}],raw:"AutocompleteOptionGroup[]"}]},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},prefix:{required:!1,tsType:{name:"unknown"},description:""},suffix:{required:!1,tsType:{name:"unknown"},description:""},itemPrefix:{required:!1,tsType:{name:"unknown"},description:""},itemSuffix:{required:!1,tsType:{name:"unknown"},description:""},label:{required:!1,tsType:{name:"string"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hideSearch:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showFooter:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},maxOptions:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"50",computed:!1}},compareFn:{required:!1,tsType:{name:"signature",type:"function",raw:"(a: NoInfer<Option | null> | object, b: NoInfer<Option | null> | object) => boolean",signature:{arguments:[{type:{name:"union",raw:"NoInfer<Option | null> | object",elements:[{name:"NoInfer",elements:[{name:"union",raw:"Option | null",elements:[{name:"signature",type:"object",raw:`{
  label?: string;
  value?: OptionValue;
  description?: string;
  disabled?: boolean;
  image?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"image",value:{name:"string",required:!1}}]}},{name:"null"}]}],raw:"NoInfer<Option | null>"},{name:"object"}]},name:"a"},{type:{name:"union",raw:"NoInfer<Option | null> | object",elements:[{name:"NoInfer",elements:[{name:"union",raw:"Option | null",elements:[{name:"signature",type:"object",raw:`{
  label?: string;
  value?: OptionValue;
  description?: string;
  disabled?: boolean;
  image?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"image",value:{name:"string",required:!1}}]}},{name:"null"}]}],raw:"NoInfer<Option | null>"},{name:"object"}]},name:"b"}],return:{name:"boolean"}}},description:"",defaultValue:{value:`(
  a: NoInfer<Option | null> | object,
  b: NoInfer<Option | null> | object
  //@ts-expect-error -- this is fine since we have specified object type in docuementation
) => a?.value === b?.value`,computed:!1}},placement:{required:!1,tsType:{name:"Placement"},description:"",defaultValue:{value:'"bottom-start"',computed:!1}},bodyClasses:{required:!1,tsType:{name:"union",raw:"string | string[] | { [key: string]: boolean }",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"signature",type:"object",raw:"{ [key: string]: boolean }",signature:{properties:[{key:{name:"string"},value:{name:"boolean",required:!0}}]}}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  value: AutocompleteOption | AutocompleteOption[] | null
) => void`,signature:{arguments:[{type:{name:"union",raw:"AutocompleteOption | AutocompleteOption[] | null",elements:[{name:"union",raw:"OptionValue | Option",elements:[{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1},{name:"signature",type:"object",raw:`{
  label?: string;
  value?: OptionValue;
  description?: string;
  disabled?: boolean;
  image?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"image",value:{name:"string",required:!1}}]}}]},{name:"Array",elements:[{name:"union",raw:"OptionValue | Option",elements:[{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1},{name:"signature",type:"object",raw:`{
  label?: string;
  value?: OptionValue;
  description?: string;
  disabled?: boolean;
  image?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"value",value:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}],required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"image",value:{name:"string",required:!1}}]}}]}],raw:"AutocompleteOption[]"},{name:"null"}]},name:"value"}],return:{name:"void"}}},description:""}}};export{ae as A};
